<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>黄明志 -- 悔过书 单曲 更多好音乐，尽在无线电音乐~</title>
  <style>
    :root{
      --bg:#6e5239;
      --card:#7b5f44;
      --muted:#c2b29a;
      --accent:#56b36a;
      --white: #fff;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", "Microsoft Yahei", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:var(--bg);
      color:var(--white);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:18px 14px;
    }
    .container{max-width:520px;margin:0 auto}

    .cover{
      width:100%;
      max-width:360px;
      margin:0 auto 18px;
      border-radius:12px;
      overflow:hidden;
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.08));
      box-shadow:0 6px 18px rgba(0,0,0,0.35);
    }
    .cover img{display:block;width:100%;height:auto}

    .title-row{display:flex;align-items:center;justify-content:space-between;margin-top:6px}
    .title{
      font-size:18px;font-weight:700;color:#fff;
    }

    /* 进度条 */
    .progress-bar{
      width:100%;
      margin:14px 0;
    }

    .controls{display:flex;align-items:center;justify-content:center;margin:12px 0}
    .play{width:72px;height:72px;cursor:pointer;display:flex;align-items:center;justify-content:center}

    /* 歌手与专辑介绍 */
    .meta{display:flex;align-items:flex-start;margin-top:20px}
    .avatar{width:64px;height:64px;border-radius:50%;overflow:hidden;margin-right:12px;border:2px solid rgba(255,255,255,0.05)}
    .avatar img{width:100%;height:100%;object-fit:cover}
    .meta .info{flex:1}
    .meta .info h3{margin:0;font-size:15px}
    .meta .info p{margin:6px 0 0;color:var(--muted);font-size:13px}

    .album-card{display:flex;align-items:center;gap:12px;margin-top:18px}
    .album-thumb{width:84px;height:84px;border-radius:8px;overflow:hidden;background:#fff}
    .album-thumb img{width:100%;height:100%;object-fit:cover}
    .album-info{color:var(--muted)}
    .album-info .year{font-weight:700;color:#fff;margin-top:18px;text-align:right}

    /* 歌词区域 */
    .lyrics{
      margin-top:20px;
      max-height:220px;
      overflow-y:auto;
      text-align:center;
      padding:10px;
      background:rgba(0,0,0,0.2);
      border-radius:8px;
    }
    .lyrics p{margin:6px 0;color:#ddd;transition:color 0.3s}
    .lyrics p.active{color:#56b36a;font-weight:bold}

    @media (max-width:420px){
      .cover{max-width:340px}
      .play{width:64px;height:64px}
    }
  </style>
</head>
<body>
  <div class="container" role="main">
    <div class="cover">
      <img src="https://file1-8ap.pages.dev/7688802.jpg" alt="专辑封面">
    </div>

    <div>
      <div class="title-row">
        <div>
          <div class="title">黄明志 - 悔过书
            <span style="font-size:12px;background:rgba(255,255,255,0.08);padding:3px 6px;border-radius:8px;margin-left:8px">VIP</span>
          </div>
        </div>
      </div>

      <!-- 可拖动进度条 -->
      <input type="range" id="progressBar" class="progress-bar" value="0" min="0" step="1">

      <!-- 播放按钮 -->
      <div class="controls" aria-label="播放控制">
        <div class="play" id="playBtn">
          <img id="playIcon" src="https://file1-8ap.pages.dev/play.png" alt="播放" width="72">
        </div>
      </div>

      <!-- 歌词 -->
      <div class="lyrics" id="lyricsBox"></div>

      <div class="meta" style="margin-top:22px">
        <div class="avatar">
          <img src="https://file1-8ap.pages.dev/namewee.jpg" alt="歌手头像">
        </div>
        <div class="info">
          <h3>歌手</h3>
          <p>黄明志</p>
        </div>
      </div>

      <div class="album-card">
        <div class="album-thumb"><img src="https://file1-8ap.pages.dev/7688802.jpg" alt="专辑封面"></div>
        <div style="flex:1">
          <div style="display:flex;justify-content:space-between;align-items:flex-start">
            <div>
              <div style="font-weight:700">悔过书</div>
              <div class="album-info">黄明志</div>
            </div>
            <div class="album-info" style="text-align:right">
              <div class="year">2025</div>
              <div style="font-size:12px;color:var(--muted);margin-top:4px">华语 · 1首</div>
            </div>
          </div>
        </div>
      </div>

      <p style="color:var(--muted);font-size:12px;margin-top:26px">Built by WalkMan in 2025</p>
    </div>
  </div>

  <!-- 隐藏音频 -->
  <audio id="audio" src="https://file1-8ap.pages.dev/07%20%E6%82%94%E8%BF%87%E4%B9%A6-new.mp3"></audio>

  <script>
    const audio = document.getElementById("audio");
    const playBtn = document.getElementById("playBtn");
    const playIcon = document.getElementById("playIcon");
    const progressBar = document.getElementById("progressBar");
    const lyricsBox = document.getElementById("lyricsBox");

    let isPlaying = false;
    let lrcData = [];

    // 播放按钮
    playBtn.addEventListener("click", () => {
      if (isPlaying) {
        audio.pause();
      } else {
        audio.play();
      }
    });

    audio.addEventListener("play", () => {
      isPlaying = true;
      playIcon.src = "https://file1-8ap.pages.dev/pause.png";
    });

    audio.addEventListener("pause", () => {
      isPlaying = false;
      playIcon.src = "https://file1-8ap.pages.dev/play.png";
    });

    // 进度条
    audio.addEventListener("timeupdate", () => {
      progressBar.max = Math.floor(audio.duration);
      progressBar.value = Math.floor(audio.currentTime);
      syncLyrics(audio.currentTime);
    });

    progressBar.addEventListener("input", () => {
      audio.currentTime = progressBar.value;
    });

    // 载入歌词
    fetch("https://file1-8ap.pages.dev/1.lrc")
      .then(res => res.text())
      .then(text => {
        lrcData = parseLRC(text);
        renderLyrics(lrcData);
      });

    function parseLRC(lrc) {
      let lines = lrc.split("\n");
      let result = [];
      let timeExp = /\[(\d+):(\d+)(?:\.(\d+))?\]/;
      for (let line of lines) {
        let match = timeExp.exec(line);
        if (match) {
          let min = parseInt(match[1]);
          let sec = parseInt(match[2]);
          let time = min * 60 + sec;
          let text = line.replace(timeExp, "").trim();
          if (text) result.push({ time, text });
        }
      }
      return result;
    }

    function renderLyrics(data) {
      lyricsBox.innerHTML = "";
      data.forEach((line, index) => {
        let p = document.createElement("p");
        p.textContent = line.text;
        p.id = "line-" + index;
        lyricsBox.appendChild(p);
      });
    }

    function syncLyrics(currentTime) {
      for (let i = 0; i < lrcData.length; i++) {
        if (currentTime >= lrcData[i].time && (!lrcData[i+1] || currentTime < lrcData[i+1].time)) {
          document.querySelectorAll(".lyrics p").forEach(p => p.classList.remove("active"));
          let activeLine = document.getElementById("line-" + i);
          if (activeLine) {
            activeLine.classList.add("active");
            activeLine.scrollIntoView({ behavior: "smooth", block: "center" });
          }
        }
      }
    }
  </script>
</body>
</html>
